<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ecto-Trigger: Ecto-Trigger</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Ecto-Trigger<span id="projectnumber">&#160;0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Ecto-Trigger </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a></p>
<p>Ecto-Trigger helps you train and deploy lightweight deep learning models for detecting objects (for example, insects) in camera trap images or video streams.</p>
<p>This code-base is a tool-kit designed to help support ecologists and other end users, especially those working on designing camera trap solutions for scenarios where traditional PIR sensors do not work well as triggers due to missed detections, high trigger latency or excessive false positives. Our example model weights have been developed to detect insects. Lightweight binary classifiers can be deployed locally on microcontrollers and continuously run to filter insect images in real-time.</p>
<p>All documentation is served via our <a href="www.google.com">web-page</a>, we have also made this accessible as a <a href="www.google.com">pdf-format vignette</a>. This all supports our paper: <a href="www.google.com">Towards scalable insect monitoring: Ultra-lightweight CNNs as on-device triggers for insect camera traps</a>, which contains more advanced technical details and background for our approach.</p>
<h1><a class="anchor" id="autotoc_md24"></a>
What is it?</h1>
<p>Ecto-Trigger trains <b>binary classifiers</b> (e.g. yes/no models) that declare whether an input image contains an object of interest. These models are:</p><ol type="1">
<li><b>Lightweight</b> - meaning they can run on low-cost computers which can be deployed in the field, e.g. microcontrollers or Raspberry Pi</li>
<li><b>Deep Learning-based</b> - use a convolutional neural network model, MobileNetv2 which is trained to detect the object of interest</li>
<li><b>Deployable</b> - an output <code>.tflite</code> file can be produced executing models on field devices.</li>
</ol>
<h1><a class="anchor" id="autotoc_md25"></a>
Code overview: What's included?</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">File   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="model__loader_8py.html">model_loader.py</a></code>   </td><td class="markdownTableBodyNone">Build and load deep learning models (for training use)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="model__trainer_8py.html">model_trainer.py</a></code>   </td><td class="markdownTableBodyNone">Train a model using your labeled image dataset    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="model__evaluator_8py.html">model_evaluator.py</a></code>   </td><td class="markdownTableBodyNone">Evaluate model performance on test data    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="model__quantiser_8py.html">model_quantiser.py</a></code>   </td><td class="markdownTableBodyNone">Convert trained models to <code>.tflite</code> for edge devices    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="saliency__map__evaluator_8py.html">saliency_map_evaluator.py</a></code>   </td><td class="markdownTableBodyNone">Visualize what the model focuses on    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="tflite__model__runner_8py.html">tflite_model_runner.py</a></code>   </td><td class="markdownTableBodyNone">Run <code>.tflite</code> models on Raspberry Pi (no TensorFlow needed)   </td></tr>
</table>
<p>To find out more about how to use every file, check the <a class="el" href="md_guides_2usage.html">usage guidance</a>, which includes a description of all the ins and outs.</p>
<h1><a class="anchor" id="autotoc_md26"></a>
Quick Start</h1>
<h2><a class="anchor" id="autotoc_md27"></a>
1. Install Requirements</h2>
<p>The first thing you need to do is install all the necessary packages for Ecto-Trigger to run in <code>python</code>. We recommend using a virtual environment, and have added all base requirements to a text file for convenience. To do this, you can use the instructions below:</p>
<div class="fragment"><div class="line">python3 -m venv venv</div>
<div class="line">source venv/bin/activate</div>
<div class="line">pip install -r requirements.txt</div>
</div><!-- fragment --><p>For further details, see our <a class="el" href="md_guides_2packages.html">install guidance</a>.</p>
<h2><a class="anchor" id="autotoc_md28"></a>
2. Prepare Your Dataset</h2>
<p>Organise your dataset in YOLO-format for training like this:</p>
<div class="fragment"><div class="line">your_data_train/</div>
<div class="line">|-- img001.jpg</div>
<div class="line">|--  img001.txt</div>
<div class="line">|--  img002.jpg</div>
<div class="line">|--  img002.txt</div>
<div class="line">|--  ...</div>
<div class="line">your_data_val/</div>
<div class="line">|--  img001.jpg</div>
<div class="line">|--  img001.txt</div>
<div class="line">|--  img002.jpg</div>
<div class="line">|--  img002.txt</div>
<div class="line">|--  ...</div>
</div><!-- fragment --><p> Each .txt file should contain the YOLO-style annotation for its corresponding image (for more information see <a href="https://roboflow.com/formats/yolo-darknet-txt">here</a>):</p>
<p>For images with insects: each line in the .txt file should contain a bounding box in this format: </p><div class="fragment"><div class="line">0 x_center y_center width height</div>
</div><!-- fragment --><p>For images without insects: the .txt file will be empty (zero length).</p>
<h2><a class="anchor" id="autotoc_md29"></a>
3. Train a Model</h2>
<div class="fragment"><div class="line">python model_trainer.py     --train_data_dir &quot;/path/to/train&quot;     --val_data_dir &quot;/path/to/val&quot;     --batch_size 16     --input_shape &quot;(120, 160, 3)&quot;     --alpha 0.35     --epochs 20     --log_dir &quot;logs&quot;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md30"></a>
4. Quantise the Model</h2>
<div class="fragment"><div class="line">python model_quantiser.py   --weights_file model_weights/your_model.hdf5   --representative_dataset /path/to/sample_data   --representative_example_nr 100   --output model_weights/your_model.tflite</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md31"></a>
5. Deploy It</h2>
<p>See the <a class="el" href="md_guides_2deployment.html">Deployment Guide</a> to run your model on:</p>
<ul>
<li>Raspberry Pi</li>
<li>ESP32-S3 Microcontroller</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md33"></a>
More Guides</h1>
<ul>
<li><a class="el" href="md_guides_2usage.html">Usage Guide</a></li>
<li><a class="el" href="md_guides_2deployment.html">Deployment Guide</a></li>
<li><a class="el" href="md_guides_2faqs.html">FAQs</a></li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md35"></a>
Contributing</h1>
<p>Ecto-Trigger is open-source, we encourage others to contribute. Please do so by making a <a href="https://github.com/ross-jg/ecto-trigger/pulls">pull request</a>.</p>
<h1><a class="anchor" id="autotoc_md36"></a>
License</h1>
<p>Distributed under the GPL-3.0, see [LICENSE](LICENSE) for more information.</p>
<h1><a class="anchor" id="autotoc_md37"></a>
Citation</h1>
<div class="fragment"><div class="line">tbc</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
